var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;import{j as o,s as u,r as d,d as c,k as i,l as f,m as p,b as m,c as y,w as _,e as v,f as g,p as h,t as b,u as w,q as x,F as P,i as k,v as O,x as j,y as C,z as T,A as D,_ as F,g as I,a as q,n as E}from"./index-Dyy5KoKL.js";const S=e=>new Promise(((d,c)=>{var i;o((i=((e,a)=>{for(var t in a||(a={}))l.call(a,t)&&n(e,t,a[t]);if(s)for(var t of s(a))r.call(a,t)&&n(e,t,a[t]);return e})({},e),a(i,t({dataType:"json",responseType:"json",success(a){a.statusCode>=200&&a.statusCode<300?d(a.data):(401===a.statusCode||!e.hideErrorToast&&u({icon:"none",title:a.data.msg||"请求错误"}),c(a))},fail(e){u({icon:"none",title:"网络错误，换个网络试试"}),c(e)}}))))}));S.get=(e,a)=>S({url:e,query:a,method:"GET"}),S.post=(e,a,t)=>S({url:e,query:t,data:a,method:"POST"});function A(e,a={immediate:!1}){const t=d(!1),s=d(!1),l=d(a.initialData),r=()=>{return a=this,r=null,n=function*(){return t.value=!0,e().then((e=>(l.value=e.data,s.value=!1,l.value))).catch((e=>{throw s.value=e,e})).finally((()=>{t.value=!1}))},new Promise(((e,t)=>{var s=e=>{try{o(n.next(e))}catch(a){t(a)}},l=e=>{try{o(n.throw(e))}catch(a){t(a)}},o=a=>a.done?e(a.value):Promise.resolve(a.value).then(s,l);o((n=n.apply(a,r)).next())}));var a,r,n};return a.immediate&&r(),{loading:t,error:s,data:l,run:r}}const z=c({__name:"request",setup(e){const a=d("http://laf.run/signup?code=ohaOgIX"),t=void 0,{loading:s,error:l,data:r,run:n}=A((()=>S.get("/foo",{name:"uglyp"})),{immediate:!0,initialData:t}),o=()=>{r.value=t};return(e,t)=>{const l=k,u=i(p("wd-button"),f);return m(),y(l,{class:"p-6 text-center"},{default:_((()=>[v(l,{class:"my-2"},{default:_((()=>[g("使用的是 laf 云后台")])),_:1}),v(l,{class:"text-green-400"},{default:_((()=>[g("我的推荐码，可以获得佣金")])),_:1}),v(l,{class:"my-2"},{default:_((()=>[h("a",{class:"my-2",href:w(a),target:"_blank"},b(w(a)),9,["href"])])),_:1}),v(u,{onClick:w(n),class:"my-6"},{default:_((()=>[g("发送请求")])),_:1},8,["onClick"]),v(l,{class:"h-12"},{default:_((()=>[w(s)?(m(),y(l,{key:0},{default:_((()=>[g("loading...")])),_:1})):(m(),x(P,{key:1},[v(l,{class:"text-xl"},{default:_((()=>[g("请求数据如下")])),_:1}),v(l,{class:"text-green leading-8"},{default:_((()=>[g(b(JSON.stringify(w(r))),1)])),_:1})],64))])),_:1}),v(u,{type:"error",onClick:o,class:"my-6",disabled:!w(r)},{default:_((()=>[g("重置数据")])),_:1},8,["disabled"])])),_:1})}}}),G=`${O()}`;function J(e={}){const a=d(!1),t=d(!1),s=d();return{loading:a,error:t,data:s,run:()=>{j({count:1,success:l=>{a.value=!0;!function({tempFilePath:e,formData:a,data:t,error:s,loading:l}){C({url:G,filePath:e,name:"file",formData:a,success:e=>{t.value=e.data},fail:e=>{s.value=!0},complete:()=>{l.value=!1}})}({tempFilePath:l.tempFilePaths[0],formData:e,data:s,error:t,loading:a})},fail:e=>{t.value=!0}})}}}const N=F(c({__name:"upload",setup(e){const{loading:a,data:t,run:s}=J({user:"uglyp"});return(e,l)=>{const r=i(p("wd-button"),f),n=k,o=D;return m(),y(n,{class:"p-4 text-center"},{default:_((()=>[v(r,{onClick:w(s)},{default:_((()=>[g("选择图片并上传")])),_:1},8,["onClick"]),w(a)?(m(),y(n,{key:0,class:"text-blue h-10"},{default:_((()=>[g("上传...")])),_:1})):(m(),x(P,{key:1},[v(n,{class:"m-2"},{default:_((()=>[g("上传后返回的接口数据：")])),_:1}),v(n,{class:"m-2"},{default:_((()=>[g(b(w(t)),1)])),_:1}),v(n,{class:"h-80 w-full"},{default:_((()=>[w(t)?(m(),y(o,{key:0,src:w(t)||w(t),mode:"scaleToFill"},null,8,["src"])):T("",!0)])),_:1})],64))])),_:1})}}}),[["__scopeId","data-v-4e940710"]]),X=F(c({__name:"about",setup(e){const{safeAreaInsets:a}=I();return(e,t)=>{const s=k,l=q("layout-default-uni");return m(),y(l,null,{default:_((()=>{var e;return[v(s,{class:"bg-white overflow-hidden pt-2 px-4",style:E({marginTop:(null==(e=w(a))?void 0:e.top)+"px"})},{default:_((()=>[v(z),v(N)])),_:1},8,["style"])]})),_:1})}}}),[["__scopeId","data-v-91ea19df"]]);export{X as default};
